{"version":3,"file":"index.js","mappings":"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","sources":["webpack://cabloy/webpack/universalModuleDefinition","webpack://cabloy/./src/api.js","webpack://cabloy/./src/config.js","webpack://cabloy/./src/data.js","webpack://cabloy/./src/index.js","webpack://cabloy/./src/util.js","webpack://cabloy/webpack/bootstrap","webpack://cabloy/webpack/before-startup","webpack://cabloy/webpack/startup","webpack://cabloy/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cabloy\"] = factory();\n\telse\n\t\troot[\"cabloy\"] = factory();\n})(self, function() {\nreturn ","module.exports = function (cabloy) {\n  return {\n    request(options) {\n      // url\n      if (options.url.indexOf('/') === 0) {\n        options.url = `${cabloy.config.api.baseURL}/api${options.url}`;\n      }\n      // jwt\n      const jwt = cabloy.util.getJwtAuthorization();\n      if (cabloy.data.dingtalk) {\n        if (!options.headers) options.headers = {};\n        options.headers.Authorization = `Bearer ${jwt}`;\n      } else {\n        if (!options.header) options.header = {};\n        options.header.Authorization = `Bearer ${jwt}`;\n      }\n      // promise\n      return new Promise((resolve, reject) => {\n        // callback\n        options.success = res => {\n          // statusCode\n          const _statusCode = res.statusCode || res.status;\n          if (_statusCode !== 200) {\n            const error = new Error();\n            error.code = _statusCode;\n            return reject(error);\n          }\n          if (res.data.code !== 0) {\n            const error = new Error();\n            error.code = res.data.code;\n            error.message = res.data.message;\n            return reject(error);\n          }\n          // check jwt oauth\n          if (res.data['eb-jwt-oauth']) {\n            cabloy.data.oauth = res.data['eb-jwt-oauth'];\n          }\n          resolve(res.data.data);\n        };\n        options.fail = err => {\n          reject(err);\n        };\n        // request\n        if (cabloy.data.dingtalk) {\n          // eslint-disable-next-line\n          dd.httpRequest(options);\n        } else {\n          wx.request(options);\n        }\n      });\n    },\n    get(url, options) {\n      options = options || {};\n      options.url = url;\n      options.method = 'GET';\n      return this.request(options);\n    },\n    post(url, data, options) {\n      options = options || {};\n      options.url = url;\n      options.method = 'POST';\n      options.data = data;\n      return this.request(options);\n    },\n  };\n};\n","const configDefault = {\n  base: {\n    providerScene: 'default',\n    locale: 'en-us',\n  },\n  api: {\n    baseURL: '',\n  },\n  locales: {\n    'en-us': 'English',\n    'zh-cn': 'Chinese',\n  },\n};\n\nmodule.exports = function (cabloy, options) {\n  return cabloy.util.extend({}, configDefault, options);\n};\n","module.exports = function (cabloy, options) {\n  let _instance = null;\n  let _user = null;\n  let _oauth = null;\n  let _locale = null;\n\n  // systemInfo\n  const _wxSystemInfo = typeof wx !== 'undefined' && wx.getSystemInfoSync();\n  // eslint-disable-next-line\n  const _ddSysmtemInfo = typeof dd !== 'undefined' && dd.getSystemInfoSync();\n\n  // container\n  let _container;\n  if (typeof dd !== 'undefined') {\n    _container = 'dingtalk';\n  } else if (typeof wx !== 'undefined' && _wxSystemInfo.environment !== 'wxwork') {\n    _container = 'wechat';\n  } else if (typeof wx !== 'undefined' && _wxSystemInfo.environment === 'wxwork') {\n    _container = 'wxwork';\n  }\n\n  return {\n    get systemInfo() {\n      return _wxSystemInfo || _ddSysmtemInfo;\n    },\n    get container() {\n      return _container;\n    },\n    get dingtalk() {\n      return _container === 'dingtalk';\n    },\n    get wechat() {\n      return _container === 'wechat';\n    },\n    get wxwork() {\n      return _container === 'wxwork';\n    },\n    get oauth() {\n      return _oauth;\n    },\n    set oauth(value) {\n      _oauth = value;\n    },\n    get user() {\n      return _user;\n    },\n    set user(value) {\n      _user = value;\n    },\n    get loggedIn() {\n      const user = this.user;\n      return user && user.agent.anonymous === 0;\n    },\n    get instance() {\n      return _instance;\n    },\n    set instance(value) {\n      _instance = value;\n    },\n    get locale() {\n      // systemInfo\n      if (!_locale) {\n        _locale = cabloy.util.preferredLocale(this.systemInfo.language);\n      }\n      // config\n      if (!_locale) {\n        _locale = cabloy.config.base.locale;\n      }\n      // default\n      if (!_locale) {\n        _locale = 'en-us';\n      }\n      return _locale;\n    },\n  };\n};\n","const Util = require('./util.js');\nconst Api = require('./api.js');\nconst Data = require('./data.js');\nconst Config = require('./config.js');\n\nmodule.exports = function (app, options) {\n  let _util;\n  let _api;\n  let _data;\n  let _config;\n\n  const cabloy = {\n    get app() {\n      return app;\n    },\n    get util() {\n      if (!_util) {\n        _util = Util(this);\n      }\n      return _util;\n    },\n    get api() {\n      if (!_api) {\n        _api = Api(this);\n      }\n      return _api;\n    },\n    get data() {\n      if (!_data) {\n        _data = Data(this);\n      }\n      return _data;\n    },\n    get config() {\n      if (!_config) {\n        _config = Config(this, options);\n      }\n      return _config;\n    },\n    set config(value) {\n      if (!_config) {\n        _config = Config(this, options);\n      }\n      _config = this.util.extend({}, _config, value);\n    },\n  };\n\n  return cabloy;\n};\n","module.exports = function (cabloy) {\n  return {\n    preferredLocale(locale) {\n      locale = locale.toLowerCase().replace(/_/g, '-');\n      const locales = cabloy.config.locales;\n      // match exactly\n      if (locales[locale]) return locale;\n      // match fuzzy\n      const localeShort = locale.split('-')[0];\n      return Object.keys(locales).find(item => item.indexOf(localeShort) === 0);\n    },\n\n    login(options) {\n      if (cabloy.data.dingtalk) {\n        return this.__login_dingtalk(options);\n      } else if (cabloy.data.wechat) {\n        return this.__login_wechat(options);\n      } else if (cabloy.data.wxwork) {\n        return this.__login_wxwork(options);\n      }\n    },\n\n    __login_wechat(options) {\n      return new Promise((resolve, reject) => {\n        const providerScene = cabloy.config.base.providerScene;\n        if (options && options.detail) {\n          // 直接进行后台登录\n          this.__login({ providerScene, code: null, detail: options.detail }).then(resolve).catch(reject);\n        } else {\n          // 小程序登录\n          wx.login({\n            success: res => {\n              const code = res.code;\n              // 获取用户信息\n              wx.getSetting({\n                success: res => {\n                  if (res.authSetting['scope.userInfo']) {\n                    // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n                    wx.getUserInfo({\n                      success: detail => {\n                        // 后台登录\n                        this.__login({ providerScene, code, detail }).then(resolve).catch(reject);\n                      },\n                    });\n                  } else {\n                    // 虽然没有userInfo，但有openid，仍然可以进行后台登录\n                    this.__login({ providerScene, code, detail: null }).then(resolve).catch(reject);\n                  }\n                },\n              });\n            },\n          });\n        }\n      });\n    },\n\n    __login_wxwork(options) {\n      return new Promise((resolve, reject) => {\n        // 小程序登录\n        wx.qy.login({\n          success: res => {\n            const providerScene = cabloy.config.base.providerScene;\n            const code = res.code;\n            this.__login({ providerScene, code }).then(resolve).catch(reject);\n          },\n        });\n      });\n    },\n\n    __login_dingtalk(options) {\n      return new Promise((resolve, reject) => {\n        // 小程序登录\n        // eslint-disable-next-line\n        dd.getAuthCode({\n          success: res => {\n            const providerScene = cabloy.config.base.providerScene;\n            const code = res.authCode;\n            this.__login({ providerScene, code }).then(resolve).catch(reject);\n          },\n        });\n      });\n    },\n\n    __login({ providerScene, code, detail }) {\n      // 后台登录\n      const url = `/a/${cabloy.data.container}/authMini/login?locale=${cabloy.data.locale}`;\n      return cabloy.api.post(url, { providerScene, code, detail }).then(data => {\n        // user\n        cabloy.data.user = data.user;\n        // instance\n        cabloy.data.instance = data.instance;\n        // config\n        cabloy.config = data.config;\n        // ok\n        return data.user;\n      });\n    },\n\n    isObject(o) {\n      return typeof o === 'object' && o !== null && o.constructor && o.constructor === Object;\n    },\n\n    extend(...args) {\n      let deep = true;\n      let to;\n      let from;\n      if (typeof args[0] === 'boolean') {\n        deep = args[0];\n        to = args[1];\n        args.splice(0, 2);\n        from = args;\n      } else {\n        to = args[0];\n        args.splice(0, 1);\n        from = args;\n      }\n      for (let i = 0; i < from.length; i += 1) {\n        const nextSource = args[i];\n        if (nextSource !== undefined && nextSource !== null) {\n          const keysArray = Object.keys(Object(nextSource));\n          for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {\n            const nextKey = keysArray[nextIndex];\n            const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n            if (desc !== undefined && desc.enumerable) {\n              if (!deep) {\n                to[nextKey] = nextSource[nextKey];\n              } else if (this.isObject(to[nextKey]) && this.isObject(nextSource[nextKey])) {\n                this.extend(to[nextKey], nextSource[nextKey]);\n              } else if (!this.isObject(to[nextKey]) && this.isObject(nextSource[nextKey])) {\n                to[nextKey] = {};\n                this.extend(to[nextKey], nextSource[nextKey]);\n              } else {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n      }\n      return to;\n    },\n\n    getJwtAuthorization() {\n      const oauth = cabloy.data.oauth;\n      if (!oauth) return '';\n      return oauth.expireTime - Date.now() > 120 * 1000 ? oauth.accessToken : oauth.refreshToken;\n    },\n  };\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(586);\n",""],"names":["module","exports","cabloy","request","options","url","indexOf","config","api","baseURL","jwt","util","getJwtAuthorization","data","dingtalk","headers","Authorization","header","Promise","resolve","reject","success","res","_statusCode","statusCode","status","error","Error","code","message","oauth","fail","err","dd","httpRequest","wx","get","method","post","configDefault","base","providerScene","locale","locales","extend","_instance","_user","_oauth","_locale","_wxSystemInfo","getSystemInfoSync","_ddSysmtemInfo","_container","environment","systemInfo","container","wechat","wxwork","value","user","loggedIn","agent","anonymous","instance","preferredLocale","language","Util","require","Api","Data","Config","app","_util","_api","_data","_config","toLowerCase","replace","localeShort","split","Object","keys","find","item","login","__login_dingtalk","__login_wechat","__login_wxwork","detail","__login","then","getSetting","authSetting","getUserInfo","qy","getAuthCode","authCode","isObject","o","constructor","deep","to","from","args","splice","i","length","nextSource","undefined","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","enumerable","expireTime","Date","now","accessToken","refreshToken"],"sourceRoot":""}